# 웹 콘솔 가이드

mcctl-console 웹 관리 인터페이스 사용 가이드입니다.

## 개요

mcctl-console은 Docker Minecraft 서버를 관리하기 위한 현대적인 웹 인터페이스를 제공합니다. Next.js로 구축되었으며 실시간 업데이트 기능을 갖추고 있어 CLI 명령의 사용자 친화적인 대안을 제공합니다.

**기본 URL:** `http://localhost:5000`

## 콘솔 접속

### 첫 로그인

1. Admin Service 시작:
   ```bash
   mcctl console service start
   ```

2. 브라우저를 열고 `http://localhost:5000`으로 이동

3. 자격 증명 입력:
   - **사용자명:** `mcctl console init` 중 생성한 관리자 사용자명
   - **비밀번호:** 관리자 비밀번호

4. **로그인** 클릭

!!! tip "자동 로그인"
    기본적으로 세션은 24시간 동안 유지됩니다. 더 긴 세션을 원하면 설정에서 `MCCTL_JWT_EXPIRY`를 수정하세요.

### 세션 관리

- 세션은 구성된 JWT 만료 시간 이후에 만료됩니다
- 리프레시 토큰이 활성 세션을 연장하는 데 사용됩니다
- 사용자 메뉴에서 **로그아웃**을 클릭하여 세션을 종료합니다

## 대시보드

대시보드는 모든 Minecraft 서버의 개요를 제공합니다.

### 서버 목록

각 서버 카드에 표시되는 정보:

- **서버 이름** - 고유 식별자
- **상태 표시기**
  - 녹색: 실행 중이고 정상
  - 노란색: 시작 중이거나 헬스 체크 진행 중
  - 빨간색: 중지됨 또는 비정상
- **서버 유형** - PAPER, VANILLA, FORGE, FABRIC 등
- **버전** - Minecraft 버전
- **플레이어** - 현재/최대 플레이어 수
- **호스트명** - Minecraft 클라이언트 연결 주소

### 빠른 작업

대시보드에서 할 수 있는 작업:

- **시작** - 중지된 서버 시작 (재생 버튼)
- **중지** - 실행 중인 서버 중지 (중지 버튼)
- **재시작** - 서버 재시작 (새로고침 버튼)
- **상세 보기** - 서버 카드 클릭

### 상태 새로고침

대시보드는 자동으로 서버 상태를 새로고침합니다:

- **기본 간격:** 30초
- **수동 새로고침:** 헤더의 새로고침 버튼 클릭

## 서버 상세 페이지

서버를 클릭하면 상세 정보를 볼 수 있습니다.

### 서버 정보

- **컨테이너 이름** - Docker 컨테이너 식별자
- **상태** - 실행 상태 및 헬스
- **가동 시간** - 마지막 시작 이후 시간
- **메모리** - 할당된 메모리
- **월드** - 현재 월드 이름과 크기

### 플레이어 섹션

- **온라인 플레이어** - 현재 접속 중인 플레이어 목록
- **플레이어 수** - 현재 / 최대

### 통계

- **CPU 사용량** - 현재 CPU 활용도
- **메모리 사용량** - RAM 소비량

### 서버 컨트롤

| 버튼 | 동작 | 설명 |
|------|------|------|
| 시작 | 서버 시작 | 중지됨일 때 사용 가능 |
| 중지 | 서버 중지 | 정상적인 종료 |
| 재시작 | 서버 재시작 | 중지 후 시작 |
| 로그 보기 | 로그 패널 열기 | 콘솔 출력 확인 |

### 콘솔 패널

콘솔 패널에서 할 수 있는 작업:

1. **로그 보기** - 최근 서버 출력 확인
2. **명령 실행** - RCON 명령 실행

#### 명령 실행

1. **로그 보기** 또는 콘솔 아이콘 클릭
2. 입력 필드에 명령 입력
3. **Enter** 또는 **전송** 클릭
4. 명령 출력 확인

**일반 명령어:**

| 명령어 | 설명 |
|--------|------|
| `list` | 온라인 플레이어 표시 |
| `say <메시지>` | 모든 플레이어에게 메시지 방송 |
| `give <플레이어> <아이템> [수량]` | 플레이어에게 아이템 지급 |
| `time set day` | 시간을 낮으로 설정 |
| `weather clear` | 날씨 맑게 |
| `save-all` | 월드 데이터 저장 |
| `stop` | 서버 중지 |

## 사용자 인터페이스 요소

### 내비게이션 바

- **로고/홈** - 대시보드로 돌아가기
- **사용자 메뉴** - 계정 옵션과 로그아웃
- **테마 전환** - 라이트 모드와 다크 모드 전환

### 서버 카드

```
+---------------------------+
|  서버 이름          [>]   |
|  PAPER 1.21.1             |
|                           |
|  상태: 실행 중            |
|  플레이어: 3/20           |
|  survival.nip.io:25565    |
|                           |
|  [시작] [중지] [재시작]   |
+---------------------------+
```

### 상태 표시기

| 색상 | 의미 |
|------|------|
| 녹색 | 실행 중, 정상 |
| 노란색 | 시작 중, 전환 중 |
| 빨간색 | 중지됨, 비정상 |
| 회색 | 알 수 없음, 구성되지 않음 |

## 모범 사례

### 보안

1. **강력한 비밀번호 사용** - 설정 중 비밀번호 요구 사항 따르기
2. **접근 제한** - `ip-whitelist` 모드를 사용하여 접근 제한
3. **HTTPS 사용** - 프로덕션 환경에서는 SSL이 포함된 리버스 프록시 구성
4. **정기 업데이트** - Admin Service를 최신 상태로 유지

### 모니터링

1. **대시보드 정기 확인** - 서버 상태와 플레이어 수 모니터링
2. **로그 검토** - 오류나 비정상적인 활동 확인
3. **알림 설정** - 중요한 서버에 대해 외부 모니터링 고려

### 성능

1. **과부하 금지** - 너무 많은 명령을 동시에 실행하지 않기
2. **정상적인 종료** - 컨테이너를 강제 종료하지 말고 stop 사용
3. **정기 백업** - 주요 변경 전 `mcctl backup` 사용

## 문제 해결

### 콘솔에 접근할 수 없음

1. **서비스 상태 확인:**
   ```bash
   mcctl console service status
   ```

2. **포트 확인:**
   ```bash
   netstat -tlnp | grep 3000
   ```

3. **로그 확인:**
   ```bash
   mcctl console service logs --console-only
   ```

### 로그인 실패

1. **자격 증명 확인:**
   ```bash
   mcctl console user list
   ```

2. **비밀번호 재설정:**
   ```bash
   mcctl console user reset-password admin
   ```

3. **NextAuth 구성 확인:**
   `NEXTAUTH_SECRET`과 `NEXTAUTH_URL`이 올바르게 설정되어 있는지 확인

### 서버 상태가 업데이트되지 않음

1. **API 상태 확인:**
   ```bash
   curl http://localhost:5001/health
   ```

2. **Docker 소켓 확인:**
   `docker-compose.admin.yml`에서 Docker 소켓이 올바르게 마운트되어 있는지 확인

3. **네트워크 확인:**
   mcctl-console이 mcctl-api에 연결할 수 있는지 확인

### 명령이 작동하지 않음

1. **서버 실행 중 확인:**
   서버가 `running` 상태여야 합니다

2. **RCON 확인:**
   서버에서 RCON이 활성화되어 있어야 합니다

3. **API 로그 확인:**
   ```bash
   mcctl console service logs --api-only
   ```

## 모바일 접근

웹 콘솔은 반응형이며 모바일 장치에서 작동합니다:

- **폰** - 간소화된 카드 레이아웃, 접을 수 있는 메뉴
- **태블릿** - 최적화된 컨트롤이 있는 전체 대시보드
- **데스크톱** - 전체 기능 세트

!!! tip "모바일 고려 사항"
    - 더 나은 명령 입력을 위해 가로 모드 사용
    - 모바일에서 접근할 때 2FA 활성화
    - 안전한 모바일 접근을 위해 VPN 고려

## 키보드 단축키

| 단축키 | 동작 |
|--------|------|
| `Ctrl+/` | 명령 입력에 포커스 |
| `Enter` | 명령 전송 |
| `Escape` | 모달/패널 닫기 |
| `r` | 대시보드 새로고침 (입력 중이 아닐 때) |

## 스크린샷

!!! note "스크린샷 플레이스홀더"
    스크린샷은 향후 업데이트에서 추가될 예정입니다. 실제 인터페이스는 위의 설명과 약간 다를 수 있습니다.

### 대시보드 뷰
_[스크린샷: 상태 표시기가 있는 여러 서버 카드를 보여주는 대시보드]_

### 서버 상세 뷰
_[스크린샷: 플레이어 목록과 컨트롤이 있는 서버 상세 페이지]_

### 콘솔 패널
_[스크린샷: 명령 입력과 로그 출력이 있는 콘솔 패널]_

### 로그인 페이지
_[스크린샷: 사용자명과 비밀번호 필드가 있는 로그인 페이지]_
